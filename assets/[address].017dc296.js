import{_ as S}from"./WalletAddress.5041787c.js";import{_ as v,i as j,a as q}from"./index.f1ccc176.js";import{d as z,_ as D,a as K}from"./debounce.dc046047.js";import{d as T,r as b,D as A,o,c as r,a as n,t as C,h as _,f as V,k as u,m as a,i as B,G as f,H as g,F as N}from"./vendor.309dbb5d.js";const F={class:"mx-auto text-gray-200 p-4 lg:text-lg sm:text-sm text-xs rounded-md shadow flex items-center"},H={style:{"white-space":"nowrap"},class:"block overflow-hidden w-60 sm:w-auto hover:text-white mr-2"},L=T({props:{private:null},setup(t){const s=t,l=b(),c=b(!1),e=z(m=>{m(),c.value=!1},1e3),{show:d,hide:p}=A(l,{content:"Copied",trigger:"manual",hideOnClick:!1}),i=async()=>{try{await navigator.clipboard.writeText(s.private),d()}catch{}c.value=!0,e(p)};return(m,k)=>{const w=D,h=K;return o(),r("code",F,[n("span",H,C(s.private),1),n("button",{ref:(y,x)=>{x.copyButton=y,l.value=y},class:"focus:outline-none","aria-label":"Copy install command"},[n("button",{ref:(y,x)=>{x.copyButton=y,l.value=y},class:"focus:outline-none","aria-label":"Copy install command"},[c.value?(o(),_(h,{key:1,class:"inline-block fill-current text-green-500 cursor-pointer mb-1","aria-hidden":"true",onClick:i})):(o(),_(w,{key:0,class:"inline-block fill-current text-gray-200 cursor-pointer hover:text-white mb-1","aria-hidden":"true",onClick:i}))],512)],512)])}}}),U={props:{data:{type:String}},data(){return{isDarkMode:j}},methods:{render(){const t={errorCorrectionLevel:"H",color:{dark:"000000",light:"ffffff"}};this.isDarkMode&&(t.color={dark:"ffffff",light:"18181b"}),qrcode.toDataURL(this.data,t).then(s=>{this.$refs.img.src=s})},resize(){const t=this.$refs.img.classList;t.contains("w-40")?t.remove("w-40"):t.add("w-40")}},mounted(){this.render(),this.$refs.img.classList.add("w-40")},watch:{isDarkMode:{handler(){this.render()}}}};function I(t,s,l,c,e,d){return o(),r("img",{ref:"img",style:{"image-rendering":"pixelated"},src:"",alt:"",class:"cursor-pointer w-full",title:"Click to zoom",onClick:s[0]||(s[0]=(...p)=>d.resize&&d.resize(...p))},null,512)}var O=v(U,[["render",I]]);const P={data(){return{address:this.$route.params.address,wallets:[],node_input:"",nodes:[],show_key:!1,wallet:null,show_qr_code:!1,transaction:{to:this.$route.query.to||"",amount:this.$route.query.amount||"",miner_fee:""},transaction_str:"",transaction_json:"",show:""}},methods:{sign_transaction(){this.transaction_json=null;try{const t=this.transaction.to,s=this.transaction.amount,l=this.transaction.miner_fee,c=this.wallet.key;if(!c||!l||!t!=!s)return this.transaction_str=null;const e=new Transaction({to:t===""?void 0:Address.toBuffer(t),amount:s===""?void 0:beautifyBigInt(parseBigInt(s)),minerFee:beautifyBigInt(parseBigInt(l)),timestamp:Date.now()});e.sign(base58.decode(c)),this.transaction_str=JSON.stringify(e),this.transaction_json=this.transaction_str}catch(t){this.transaction_str=t}},del(){this.wallets=this.wallets.filter(t=>t.address!==this.address),this.wallet=null,this.$router.push("/wallet")},async share(){const t=this.address;console.log(t);const s={errorCorrectionLevel:"H",color:{dark:"000000",light:"ffffff"}},l=e=>{let d=atob(e.split(",")[1]),p=new ArrayBuffer(d.length),i=new Uint8Array(p);for(var m=0;m<d.length;m++)i[m]=d.charCodeAt(m);return new Blob([p],{type:"image/png"})},c=async()=>new File([l(await qrcode.toDataURL(t,s))],"qrcode.png",{type:"image/png"});window.navigator.share({title:"Send Viscoin",url:t,files:[await c()]})}},mounted(){localStorage.keys&&(this.wallets=JSON.parse(localStorage.keys).map(t=>{const s=base58.decode(t),l=addressFromPublicKey(publicKeyFromPrivateKey(s)),c=Address.convertToChecksumAddress(l),e=base58.encode(c);return{key:t,address:e}}),this.wallet=this.wallets.find(t=>t.address===this.address)),localStorage.nodes&&(this.nodes=JSON.parse(localStorage.nodes)),this.qr_address=`${location.origin}/#/wallet?to=${this.wallet?.address}`,this.qr_key=`${location.origin}/#/wallet/import?key=${this.wallet?.key}`},watch:{wallets:{handler(t){localStorage.keys=JSON.stringify(t.map(s=>s=s.key))},deep:!0},nodes:{handler(t){localStorage.nodes=JSON.stringify(t)},deep:!0}}},J={class:"max-w-3xl sm:mx-auto text-center px-8 sm:px-16 flex flex-col gap-10 py-10 md:px-12"},M={key:0,class:"prose prose-discord dark:prose-light lg:prose-lg px-6 mx-auto pb-8 w-full"},R={key:0},E={key:1,style:{"font-size":"1rem"}},W={key:2},Q={key:3,style:{"font-size":"1rem"}},Y={key:4},G={key:5,style:{"font-size":"1rem"}},X={style:{"user-select":"none"},class:"flex flex-row justify-evenly w-full"},Z={key:6,class:"max-w-3xl sm:mx-auto px-8 sm:px-16 flex flex-col py-10 md:px-12"},$=n("label",{style:{"font-size":".8rem"},for:"address"},"The base58 address of the recipient.",-1),ee=n("label",{style:{"font-size":".8rem"},for:"amount"},"How much the recipient will receive.",-1),te=n("label",{style:{"font-size":".8rem"},for:"miner-fee"},"How much the miner will receive.",-1),se={key:7,class:"max-w-3xl sm:mx-auto text-center px-8 sm:px-16 flex flex-col gap-10 py-10 md:px-12"},oe={class:"flex flex-row justify-center"},re={key:8,class:"flex justify-center mt-6"},ne={class:"flex flex-col justify-center center align-center"},ae=n("div",{style:{"font-size":"1rem"},class:"mx-auto"},"Scan address QR",-1),ie={style:{"font-size":".8rem"},class:"mx-auto"},le={key:9,class:"flex justify-center"};function ce(t,s,l,c,e,d){const p=S,i=q,m=V("router-link"),k=L,w=O;return o(),r(N,null,[n("div",J,[u(p,{title:"address (public)",class:"max-w-screen-sm filter drop-shadow-lg mx-auto",address:e.wallet?.address},null,8,["address"])]),e.wallet?(o(),r("div",M,[e.show===""?(o(),r("h3",R,"Wallet")):a("",!0),e.show===""?(o(),r("p",E," Here you can send, receive and store Viscoin. ")):a("",!0),e.show==="transaction"?(o(),r("h3",W,"Create Transaction")):a("",!0),e.show==="transaction"?(o(),r("p",Q," Create a transaction by filling in the required fields and signing the transaction. You can then click Broadcast which will redirect you to the API tool. ")):a("",!0),e.show==="private_key"?(o(),r("h3",Y,"Private Key")):a("",!0),e.show==="private_key"?(o(),r("p",G," Your Private Key is sensitive information. Do not share it with anyone unless you want them to be granted full access to the coins on your wallet. ")):a("",!0),n("div",X,[u(i,{text:"Transaction",onClick:s[0]||(s[0]=h=>e.show=e.show==="transaction"?e.show="":"transaction")}),u(m,{to:"/explorer?search=balance/"+e.wallet.address},{default:B(()=>[u(i,{class:"mx-auto",text:"Balance"})]),_:1},8,["to"]),u(i,{text:"Private Key",onClick:s[1]||(s[1]=h=>e.show=e.show==="private_key"?e.show="":"private_key")})]),e.show==="transaction"?(o(),r("div",Z,[$,f(n("input",{name:"address",class:"bg-gray-200 text-gray-800 hover:bg-gray-300 hover:text-black dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-900 dark:hover:text-white mb-10","onUpdate:modelValue":s[2]||(s[2]=h=>e.transaction.to=h),type:"text",placeholder:"Enter address..."},null,512),[[g,e.transaction.to]]),ee,f(n("input",{name:"amount",class:"bg-gray-200 text-gray-800 hover:bg-gray-300 hover:text-black dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-900 dark:hover:text-white mb-10","onUpdate:modelValue":s[3]||(s[3]=h=>e.transaction.amount=h),type:"text",placeholder:"Enter amount..."},null,512),[[g,e.transaction.amount]]),te,f(n("input",{name:"miner-fee",class:"bg-gray-200 text-gray-800 hover:bg-gray-300 hover:text-black dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-900 dark:hover:text-white mb-6","onUpdate:modelValue":s[4]||(s[4]=h=>e.transaction.miner_fee=h),type:"text",placeholder:"Enter miner fee..."},null,512),[[g,e.transaction.miner_fee]]),u(i,{class:"mx-auto mb-10",onClick:d.sign_transaction,text:"Sign transaction"},null,8,["onClick"]),e.transaction_str?f((o(),r("textarea",{key:0,class:"bg-gray-200 text-gray-800 hover:bg-gray-300 hover:text-black dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-900 dark:hover:text-white resize-none text-xs mb-6","onUpdate:modelValue":s[5]||(s[5]=h=>e.transaction_str=h),name:"",id:"",cols:"30",rows:"6"},null,512)),[[g,e.transaction_str]]):a("",!0),e.transaction_json?(o(),_(m,{key:1,target:"_blank",to:"/explorer?search="+e.transaction_json},{default:B(()=>[u(i,{class:"mx-auto",text:"Broadcast"})]),_:1},8,["to"])):a("",!0)])):a("",!0),e.show==="private_key"?(o(),r("div",se,[n("div",oe,[u(i,{class:"mx-auto hover:bg-red-600 bg-red-500",onClick:d.del,text:"Delete"},null,8,["onClick"]),u(i,{class:"mx-auto bg-indigo-600 hover:bg-indigo-700",onClick:s[6]||(s[6]=h=>e.show_key=!e.show_key),text:e.show_key?"Hide Key":"Show Key"},null,8,["text"])]),e.show_key?(o(),_(k,{key:0,title:"address (public)",class:"max-w-screen-sm w-60",private:e.wallet?.key},null,8,["private"])):a("",!0)])):a("",!0),e.show===""&&t.qr_address?(o(),r("div",re,[n("div",ne,[ae,n("div",ie,C(t.qr_address),1)])])):a("",!0),e.show===""&&t.qr_address?(o(),r("div",le,[u(w,{data:t.qr_address},null,8,["data"])])):a("",!0),u(i,{class:"w-20 mx-auto",text:"share",onClick:d.share},null,8,["onClick"])])):a("",!0)],64)}var pe=v(P,[["render",ce]]);export{pe as default};
