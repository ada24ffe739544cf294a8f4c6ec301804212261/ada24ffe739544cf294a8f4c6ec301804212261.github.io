import{_ as m,a as y}from"./index.1b3d052b.js";import{f as _,o as c,c as u,G as h,H as k,a as o,k as i,i as f,t as x,m as v}from"./vendor.5394072c.js";const w={data(){return{wallets:[],error:!1,key:""}},methods:{import_wallet(r){if(!(r.type==="keydown"&&r.key!=="Enter"))try{const e=base58.decode(this.key),a=addressFromPublicKey(publicKeyFromPrivateKey(e)),l=Address.convertToChecksumAddress(a),t=base58.encode(e),s=base58.encode(l);if(this.wallets.find(n=>n.key===t))throw new Error("Wallet already exists");this.wallets.push({key:t,address:s}),this.$router.push("/wallet/"+s)}catch(e){this.error=e}}},mounted(){document.title="Viscoin.net - Wallet - Import",this.$refs.input.focus(),this.$refs.input.select(),localStorage.keys&&(this.wallets=JSON.parse(localStorage.keys).map(r=>{const e=base58.decode(r),a=addressFromPublicKey(publicKeyFromPrivateKey(e)),l=Address.convertToChecksumAddress(a),t=base58.encode(l);return{key:r,address:t}})),this.$route.query.key&&(this.key=this.$route.query.key)},watch:{wallets:{handler(r){localStorage.keys=JSON.stringify(r.map(e=>e=e.key))},deep:!0}}},g={class:"prose prose-discord dark:prose-light lg:prose-lg mx-auto pb-8 w-full max-w-3xl sm:mx-auto px-8 sm:px-16 flex flex-col gap-2 md:px-12"},b=o("div",null,[o("h2",null,"Import wallet")],-1),C={class:"mx-auto mt-10 flex gap-10",style:{"user-select":"none"}},K={key:0},S=o("h3",null,"Error",-1);function E(r,e,a,l,t,s){const n=y,p=_("router-link");return c(),u("div",g,[b,h(o("input",{ref:"input",onKeydown:e[0]||(e[0]=(...d)=>s.import_wallet&&s.import_wallet(...d)),class:"bg-gray-200 text-gray-800 hover:bg-gray-300 hover:text-black dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-900 dark:hover:text-white",type:"text","onUpdate:modelValue":e[1]||(e[1]=d=>t.key=d),placeholder:"Enter private key..."},null,544),[[k,t.key]]),o("div",C,[i(n,{onClick:s.import_wallet,text:"Import"},null,8,["onClick"]),i(p,{to:"/wallet"},{default:f(()=>[i(n,{text:"Cancel"})]),_:1})]),t.error?(c(),u("div",K,[S,o("p",null,x(t.error),1)])):v("",!0)])}var A=m(w,[["render",E]]);export{A as default};
