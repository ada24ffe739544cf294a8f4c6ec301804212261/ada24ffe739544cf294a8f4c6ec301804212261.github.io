import{_ as y}from"./ToggleButton.c5697d74.js";import{_ as b,a as v}from"./index.c1bed929.js";import{o as s,c as n,a as o,k as a,j as k,t as h,G as u,H as _,F as m,g as x,m as g}from"./vendor.309dbb5d.js";const w={data(){return{nodes:[],search:this.$route.query.search||"",post_get:!1,res:"",error:""}},methods:{add_node(){!this.node_input||this.nodes.includes(this.node_input)||(this.nodes.push(this.node_input),this.node_input="")},remove_node(){this.nodes=this.nodes.filter(t=>t!==this.node_input)},submit(t){console.log(t)},toggle_post_get(t){typeof t=="boolean"&&(console.log("toggle",t),this.post_get=t)},post_transaction(t){const l=Transaction.minify(this.transaction);this.error="",this.res="";const r=document.createElement("form");r.style.visibility="hidden",document.body.appendChild(r),r.action="http://"+t+"/transaction",r.method="post",r.target="_blank";for(const p in l){const e=document.createElement("input");e.name=p,e.value=l[p],r.appendChild(e)}r.submit(),r.remove()}},mounted(){document.title="Viscoin.net - Explorer (Legacy)",this.$refs.input.focus(),this.$refs.input.select(),localStorage.nodes&&(this.nodes=JSON.parse(localStorage.nodes));try{this.transaction=JSON.parse(this.search);for(const t in this.transaction)typeof this.transaction[t]=="object"&&(this.transaction[t]=Buffer.from(this.transaction[t]).toString("binary"));this.post_get=!0}catch{}},watch:{nodes:{handler(t){localStorage.nodes=JSON.stringify(t)},deep:!0}}},T={class:"prose prose-discord dark:prose-light lg:prose-lg mx-auto pb-8 w-full max-w-3xl sm:mx-auto px-8 sm:px-16 flex flex-col gap-2 md:px-12"},S={class:"flex justify-between"},C=o("div",{class:"flex flex-col"},[o("h3",null,"Explorer (Legacy)"),o("p",{style:{"font-size":"1rem"}}," This tool aims to make it easier to interact with any Viscoin node's HTTP API. ")],-1),X={class:"flex flex-col align-center justify-center"},j={style:{"font-size":"0.8rem"}},E={key:0,href:"https://github.com/viscoin/viscoin/blob/main/config/settings.json#L55&L56"},V={key:1,href:"https://github.com/viscoin/viscoin/blob/main/config/settings.json#L43&L52"},N=["placeholder"],P={key:0,class:"prose prose-discord dark:prose-light lg:prose-lg px-6 mx-auto pb-8 w-full grid gap-y-5 gap-x-10 max-w-7xl grid-cols-1 sm:grid-cols-2 xl:grid-cols-3"},B=["href"],L={key:1,class:"prose prose-discord dark:prose-light lg:prose-lg px-6 mx-auto pb-8 w-full grid gap-y-5 gap-x-10 max-w-7xl grid-cols-1 sm:grid-cols-2 xl:grid-cols-3"},O={class:"mx-auto"},J=o("div",{style:{"font-size":".8rem"}}," IP-address of Viscoin HTTP API ",-1),R={class:"max-w-3xl sm:mx-auto text-center px-8 sm:px-16 flex gap-10 mb-40 md:px-12 justify-center",style:{"user-select":"none"}},z={key:2},A=o("h3",null,"Error",-1),D={key:3},G=o("h3",null,"Response",-1);function H(t,l,r,p,e,c){const f=y,d=v;return s(),n("div",T,[o("div",S,[C,o("div",X,[a(f,{defaultState:e.post_get,labelEnableText:"POST",labelDisableText:"GET",onChange:c.toggle_post_get},null,8,["defaultState","onChange"])])]),o("div",j,[k(h(e.post_get?"Post data":"Search query")+", ",1),e.post_get?(s(),n("a",E,"Post References")):(s(),n("a",V,"Get References"))]),u(o("input",{ref:"input",class:"bg-gray-200 text-gray-800 hover:bg-gray-300 hover:text-black dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-900 dark:hover:text-white mb-6",type:"text","onUpdate:modelValue":l[0]||(l[0]=i=>e.search=i),placeholder:e.post_get?"Enter transaction JSON here...":"block, peers, block/123, balance/address"},null,8,N),[[_,e.search]]),e.post_get?g("",!0):(s(),n("div",P,[(s(!0),n(m,null,x(e.nodes,i=>(s(),n("a",{href:"http://"+i+"/"+e.search+"?b=1",target:"_blank",rel:"noopener",class:"mx-auto"},[a(d,{class:"w-40 overflow-x-auto custom-scroll",text:i},null,8,["text"])],8,B))),256))])),e.post_get?(s(),n("div",L,[(s(!0),n(m,null,x(e.nodes,i=>(s(),n("div",O,[a(d,{onClick:I=>c.post_transaction(i),class:"w-40 overflow-x-auto custom-scroll",text:i},null,8,["onClick","text"])]))),256))])):g("",!0),J,u(o("input",{class:"bg-gray-200 text-gray-800 hover:bg-gray-300 hover:text-black dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-900 dark:hover:text-white mb-6",type:"text","onUpdate:modelValue":l[1]||(l[1]=i=>t.node_input=i),placeholder:"0.0.0.0/0, 192.168.0.0/24, XXXXXXXXXXX.onion"},null,512),[[_,t.node_input]]),o("div",R,[a(d,{onClick:c.remove_node,text:"Remove"},null,8,["onClick"]),a(d,{onClick:c.add_node,text:"Add"},null,8,["onClick"])]),e.error?(s(),n("div",z,[A,o("p",null,h(e.error),1)])):e.res?(s(),n("div",D,[G,o("p",null,h(e.res),1)])):g("",!0)])}var M=b(w,[["render",H]]);export{M as default};
