import{_ as B}from"./ToggleButton.3f149d9d.js";import{_ as S}from"./WalletAddress.5041787c.js";import{_ as j,a as T}from"./index.31d21747.js";import{d as A,_ as E,a as V}from"./debounce.dc046047.js";import{d as q,r as C,D as K,o,c as l,a as r,t as v,h as y,f as N,m as i,k as c,i as g,G as x,H as w}from"./vendor.309dbb5d.js";const D={class:"mx-auto text-gray-200 p-4 lg:text-lg sm:text-sm text-xs rounded-md shadow flex items-center"},O={style:{"white-space":"nowrap"},class:"block overflow-hidden w-60 sm:w-auto hover:text-white mr-2"},U=q({props:{private:null},setup(s){const t=s,d=C(),h=C(!1),e=A(_=>{_(),h.value=!1},1e3),{show:n,hide:p}=K(d,{content:"Copied",trigger:"manual",hideOnClick:!1}),m=async()=>{try{await navigator.clipboard.writeText(t.private),n()}catch{}h.value=!0,e(p)};return(_,u)=>{const k=E,a=V;return o(),l("code",D,[r("span",O,v(t.private),1),r("button",{ref:(f,b)=>{b.copyButton=f,d.value=f},class:"focus:outline-none","aria-label":"Copy install command"},[r("button",{ref:(f,b)=>{b.copyButton=f,d.value=f},class:"focus:outline-none","aria-label":"Copy install command"},[h.value?(o(),y(a,{key:1,class:"inline-block fill-current text-green-500 cursor-pointer mb-1","aria-hidden":"true",onClick:m})):(o(),y(k,{key:0,class:"inline-block fill-current text-gray-200 cursor-pointer hover:text-white mb-1","aria-hidden":"true",onClick:m}))],512)],512)])}}}),H={data(){return{faces:["(\u273F\u25E0\u203F\u25E0)","\u2267\u25E1\u2266","(\uFF89\u25D5\u30EE\u25D5)\uFF89*:\uFF65\uFF9F\u2727","(\u3065\uFF61\u25D5\u203F\u203F\u25D5\uFF61)\u3065","(\u25B0\u02D8\u25E1\u02D8\u25B0)","\u25CE[\u25AA\u203F\u25AA]\u25CE","(\u273F \u2665\u203F\u2665)","\u2665\u203F\u2665","(\uFFE3\u3002\uFFE3)\uFF5E\uFF5A\uFF5A\uFF5A","( \xB4_\u2283\uFF40)","( \u0361\xB0 \u035C\u0296 \u0361\xB0)","(\u3000\uFF9F,_\u309D\uFF9F)"],address:this.$route.params.address,wallets:[],node_input:"",nodes:[],show_key:!1,wallet:null,show_qr_code:!1,transaction:{to:this.$route.query.to||"",amount:this.$route.query.amount||"",miner_fee:""},transaction_str:"",transaction_json:"",show:"",explorer:!0}},methods:{toggle_explorer(s){typeof s=="boolean"&&(this.explorer=s)},sign_transaction(){this.transaction_json=null;try{if(!this.transaction.to)throw new Error("Recipient address is empty");if(!Address.verifyChecksumAddress(base58.decode(this.transaction.to)))throw new Error("Recipient address invalid checksum");const t=Address.toBuffer(this.transaction.to);if(this.transaction.to===this.address)throw new Error("Recipient address is the same as sender address");if(!this.transaction.amount)throw new Error("Amount is empty");const d=beautifyBigInt(parseBigInt(this.transaction.amount));if(!this.transaction.miner_fee)throw new Error("Miner fee is empty");const h=beautifyBigInt(parseBigInt(this.transaction.miner_fee)),e=this.wallet.key,n=new Transaction({to:t,amount:d,minerFee:h,timestamp:Date.now()});n.sign(base58.decode(e));const p=n.isValid();if(p)throw new Error(`Transaction invalid 0b${p.toString(2)}`);this.transaction_str=JSON.stringify(n),this.transaction_json=this.transaction_str}catch(s){this.transaction_str=s}},del(){this.wallets=this.wallets.filter(s=>s.address!==this.address),this.wallet=null,this.$router.push("/wallet")},async share(){const s=this.qr_address,t={errorCorrectionLevel:"H",color:{dark:"000000",light:"ffffff"}},d=e=>{let n=atob(e.split(",")[1]),p=new ArrayBuffer(n.length),m=new Uint8Array(p);for(var _=0;_<n.length;_++)m[_]=n.charCodeAt(_);return new Blob([p],{type:"image/png"})},h=async()=>new File([d(await qrcode.toDataURL(s,t))],"qrcode.png",{type:"image/png"});window.navigator.share({title:"Send Viscoin",url:s,files:[await h()]})}},mounted(){document.title="Viscoin.net - Wallet - "+this.$route.params.address,localStorage.keys&&(this.wallets=JSON.parse(localStorage.keys).map(s=>{const t=base58.decode(s),d=addressFromPublicKey(publicKeyFromPrivateKey(t)),h=Address.convertToChecksumAddress(d),e=base58.encode(h);return{key:s,address:e}}),this.wallet=this.wallets.find(s=>s.address===this.address)),localStorage.nodes&&(this.nodes=JSON.parse(localStorage.nodes)),this.qr_address=`${location.origin}/#/wallet?to=${this.wallet?.address}`,this.qr_key=`${location.origin}/#/wallet/import?key=${this.wallet?.key}`},watch:{wallets:{handler(s){localStorage.keys=JSON.stringify(s.map(t=>t=t.key))},deep:!0},nodes:{handler(s){localStorage.nodes=JSON.stringify(s)},deep:!0}}},I={class:"flex flex-col justify-between h-full"},J={class:"prose prose-discord dark:prose-light lg:prose-lg px-6 mx-auto pb-8 w-full mt-8"},R={class:"flex justify-between"},z={key:0},F={key:1},M={class:"pt-10"},P=r("span",null,"Back",-1),W=r("span",null,"Back",-1),L={key:0,class:"max-w-3xl sm:mx-auto text-center px-8 sm:px-16 flex flex-col gap-10 py-10 md:px-12"},G={key:1,class:"prose prose-discord dark:prose-light lg:prose-lg px-6 mx-auto pb-8 w-full"},Q={key:0,class:"max-w-3xl sm:mx-auto px-8 sm:px-16 flex flex-col py-10 md:px-12"},X={class:"flex flex-col sm:flex-row justify-between mb-10"},Y=r("strong",null,"Sending\xA0from",-1),Z=r("label",{style:{"font-size":".8rem"},for:"address"},"The base58 address of the recipient.",-1),$=r("label",{style:{"font-size":".8rem"},for:"amount"},"How much the recipient will receive.",-1),ee=r("label",{style:{"font-size":".8rem"},for:"miner-fee"},"How much the miner will receive.",-1),te=["href"],se={key:1,class:"max-w-3xl sm:mx-auto text-center px-8 sm:px-16 flex flex-col gap-10 py-10 md:px-12"},oe={class:"flex flex-row justify-center"},re={key:2,style:{"user-select":"none"},class:"flex flex-row justify-evenly w-full"},ne=["href"],ae={key:0,style:{"user-select":"none"},class:"flex flex-row justify-evenly w-full mb-10"};function le(s,t,d,h,e,n){const p=B,m=N("router-link"),_=S,u=T,k=U;return o(),l("div",I,[r("div",J,[r("h4",R,[r("span",null,v(this.faces[Math.floor(Math.random()*this.faces.length)]),1),e.show==="transaction"?(o(),l("span",z,"Send")):i("",!0),e.show==="private_key"?(o(),l("span",F,"Private")):i("",!0),c(p,{defaultState:e.explorer,labelEnableText:"Vis.gg",labelDisableText:"Legacy",onChange:n.toggle_explorer},null,8,["defaultState","onChange"])]),r("div",M,[e.show===""?(o(),y(m,{key:0,to:"/wallet"},{default:g(()=>[P]),_:1})):(o(),y(m,{key:1,to:"/wallet/"+this.address,onClick:t[0]||(t[0]=a=>this.show="")},{default:g(()=>[W]),_:1},8,["to"]))])]),e.show===""?(o(),l("div",L,[c(_,{title:"address (public)",class:"max-w-screen-sm filter drop-shadow-lg mx-auto pb-40",address:e.wallet?.address},null,8,["address"])])):i("",!0),e.wallet?(o(),l("div",G,[e.show==="transaction"?(o(),l("div",Q,[r("div",X,[Y,r("span",null,v(this.address),1)]),Z,x(r("input",{name:"address",class:"bg-gray-200 text-gray-800 hover:bg-gray-300 hover:text-black dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-900 dark:hover:text-white mb-10","onUpdate:modelValue":t[1]||(t[1]=a=>e.transaction.to=a),type:"text",placeholder:"Enter address..."},null,512),[[w,e.transaction.to]]),$,x(r("input",{name:"amount",class:"bg-gray-200 text-gray-800 hover:bg-gray-300 hover:text-black dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-900 dark:hover:text-white mb-10","onUpdate:modelValue":t[2]||(t[2]=a=>e.transaction.amount=a),type:"text",placeholder:"Enter amount..."},null,512),[[w,e.transaction.amount]]),ee,x(r("input",{name:"miner-fee",class:"bg-gray-200 text-gray-800 hover:bg-gray-300 hover:text-black dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-900 dark:hover:text-white mb-6","onUpdate:modelValue":t[3]||(t[3]=a=>e.transaction.miner_fee=a),type:"text",placeholder:"Enter miner fee..."},null,512),[[w,e.transaction.miner_fee]]),c(u,{style:{"user-select":"none"},class:"mx-auto mb-10",onClick:n.sign_transaction,text:"Sign Transaction"},null,8,["onClick"]),e.transaction_str?x((o(),l("textarea",{key:0,class:"custom-scroll bg-gray-200 text-gray-800 hover:bg-gray-300 hover:text-black dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-900 dark:hover:text-white resize-none text-xs mb-6","onUpdate:modelValue":t[4]||(t[4]=a=>e.transaction_str=a),name:"",id:"",cols:"30",rows:"6"},null,512)),[[w,e.transaction_str]]):i("",!0),e.explorer&&e.transaction_json?(o(),l("a",{key:1,href:"https://vis.gg/#/search/"+e.transaction_json},[c(u,{style:{"user-select":"none"},class:"mx-auto bg-indigo-600 hover:bg-indigo-700",text:"Sign & Broadcast"})],8,te)):e.transaction_json?(o(),y(m,{key:2,to:"/api?search="+e.transaction_json},{default:g(()=>[c(u,{style:{"user-select":"none"},class:"mx-auto",text:"Sign & Broadcast"})]),_:1},8,["to"])):i("",!0)])):i("",!0),e.show==="private_key"?(o(),l("div",se,[r("div",oe,[c(u,{class:"mx-auto hover:bg-red-600 bg-red-500",onClick:n.del,text:"Delete"},null,8,["onClick"]),c(u,{class:"mx-auto",onClick:t[5]||(t[5]=a=>e.show_key=!e.show_key),text:e.show_key?"Hide Key":"Show Key"},null,8,["text"])]),e.show_key?(o(),y(k,{key:0,title:"address (public)",class:"max-w-screen-sm w-60",private:e.wallet?.key},null,8,["private"])):i("",!0)])):i("",!0),e.show===""?(o(),l("div",re,[c(u,{text:"Create Transaction",onClick:t[6]||(t[6]=a=>e.show=e.show==="transaction"?e.show="":"transaction")}),e.explorer?(o(),l("a",{key:0,href:"https://vis.gg/#/explorer/"+e.wallet.address},[c(u,{class:"mx-auto bg-indigo-600 hover:bg-indigo-700",text:"Check Balance"})],8,ne)):(o(),y(m,{key:1,to:"/api?search=balance/"+e.wallet.address},{default:g(()=>[c(u,{class:"mx-auto",text:"Check Balance"})]),_:1},8,["to"]))])):i("",!0)])):i("",!0),r("div",null,[e.show===""?(o(),l("div",ae,[c(u,{text:"Private Key",onClick:t[7]||(t[7]=a=>e.show=e.show==="private_key"?e.show="":"private_key")})])):i("",!0)])])}var pe=j(H,[["render",le]]);export{pe as default};
