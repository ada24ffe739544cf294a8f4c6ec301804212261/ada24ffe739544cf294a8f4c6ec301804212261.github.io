import{_ as C}from"./WalletAddress.5041787c.js";import{_ as B}from"./ToggleButton.8d8e6353.js";import{_ as S,a as j}from"./index.e9ee741c.js";import{d as T,_ as V,a as A}from"./debounce.dc046047.js";import{d as K,r as b,D as q,o,c as n,a,t as D,h as _,f as N,k as u,m as l,i as v,G as g,H as x,F as z}from"./vendor.309dbb5d.js";const F={class:"mx-auto text-gray-200 p-4 lg:text-lg sm:text-sm text-xs rounded-md shadow flex items-center"},I={style:{"white-space":"nowrap"},class:"block overflow-hidden w-60 sm:w-auto hover:text-white mr-2"},P=K({props:{private:null},setup(s){const t=s,c=b(),d=b(!1),e=T(r=>{r(),d.value=!1},1e3),{show:h,hide:p}=q(c,{content:"Copied",trigger:"manual",hideOnClick:!1}),m=async()=>{try{await navigator.clipboard.writeText(t.private),h()}catch{}d.value=!0,e(p)};return(r,f)=>{const w=V,i=A;return o(),n("code",F,[a("span",I,D(t.private),1),a("button",{ref:(y,k)=>{k.copyButton=y,c.value=y},class:"focus:outline-none","aria-label":"Copy install command"},[a("button",{ref:(y,k)=>{k.copyButton=y,c.value=y},class:"focus:outline-none","aria-label":"Copy install command"},[d.value?(o(),_(i,{key:1,class:"inline-block fill-current text-green-500 cursor-pointer mb-1","aria-hidden":"true",onClick:m})):(o(),_(w,{key:0,class:"inline-block fill-current text-gray-200 cursor-pointer hover:text-white mb-1","aria-hidden":"true",onClick:m}))],512)],512)])}}}),H={data(){return{address:this.$route.params.address,wallets:[],node_input:"",nodes:[],show_key:!1,wallet:null,show_qr_code:!1,transaction:{to:this.$route.query.to||"",amount:this.$route.query.amount||"",miner_fee:""},transaction_str:"",transaction_json:"",show:"",explorer:!0}},methods:{toggle_explorer(s){typeof s=="boolean"&&(this.explorer=s)},sign_transaction(){this.transaction_json=null;try{const s=this.transaction.to,t=this.transaction.amount,c=this.transaction.miner_fee,d=this.wallet.key;if(!d||!c||!s!=!t)return this.transaction_str=null;const e=new Transaction({to:s===""?void 0:Address.toBuffer(s),amount:t===""?void 0:beautifyBigInt(parseBigInt(t)),minerFee:beautifyBigInt(parseBigInt(c)),timestamp:Date.now()});e.sign(base58.decode(d)),this.transaction_str=JSON.stringify(e),this.transaction_json=this.transaction_str}catch(s){this.transaction_str=s}},del(){this.wallets=this.wallets.filter(s=>s.address!==this.address),this.wallet=null,this.$router.push("/wallet")},async share(){const s=this.qr_address,t={errorCorrectionLevel:"H",color:{dark:"000000",light:"ffffff"}},c=e=>{let h=atob(e.split(",")[1]),p=new ArrayBuffer(h.length),m=new Uint8Array(p);for(var r=0;r<h.length;r++)m[r]=h.charCodeAt(r);return new Blob([p],{type:"image/png"})},d=async()=>new File([c(await qrcode.toDataURL(s,t))],"qrcode.png",{type:"image/png"});window.navigator.share({title:"Send Viscoin",url:s,files:[await d()]})}},mounted(){document.title="Viscoin.net - Wallet - "+this.$route.params.address,localStorage.keys&&(this.wallets=JSON.parse(localStorage.keys).map(s=>{const t=base58.decode(s),c=addressFromPublicKey(publicKeyFromPrivateKey(t)),d=Address.convertToChecksumAddress(c),e=base58.encode(d);return{key:s,address:e}}),this.wallet=this.wallets.find(s=>s.address===this.address)),localStorage.nodes&&(this.nodes=JSON.parse(localStorage.nodes)),this.qr_address=`${location.origin}/#/wallet?to=${this.wallet?.address}`,this.qr_key=`${location.origin}/#/wallet/import?key=${this.wallet?.key}`},watch:{wallets:{handler(s){localStorage.keys=JSON.stringify(s.map(t=>t=t.key))},deep:!0},nodes:{handler(s){localStorage.nodes=JSON.stringify(s)},deep:!0}}},O={class:"max-w-3xl sm:mx-auto text-center px-8 sm:px-16 flex flex-col gap-10 py-10 md:px-12"},U={key:0,class:"prose prose-discord dark:prose-light lg:prose-lg px-6 mx-auto pb-8 w-full"},E={class:"flex justify-between"},J={key:0},W={key:1},L={key:2},R={key:0,style:{"font-size":"1rem"}},Y={key:1,style:{"font-size":"1rem"}},G={key:2,style:{"font-size":"1rem"}},M={style:{"user-select":"none"},class:"flex flex-row justify-evenly w-full"},Q=["href"],X={key:3,class:"max-w-3xl sm:mx-auto px-8 sm:px-16 flex flex-col py-10 md:px-12"},Z=a("label",{style:{"font-size":".8rem"},for:"address"},"The base58 address of the recipient.",-1),$=a("label",{style:{"font-size":".8rem"},for:"amount"},"How much the recipient will receive.",-1),ee=a("label",{style:{"font-size":".8rem"},for:"miner-fee"},"How much the miner will receive.",-1),te=["href"],se={key:4,class:"max-w-3xl sm:mx-auto text-center px-8 sm:px-16 flex flex-col gap-10 py-10 md:px-12"},oe={class:"flex flex-row justify-center"};function re(s,t,c,d,e,h){const p=C,m=B,r=j,f=N("router-link"),w=P;return o(),n(z,null,[a("div",O,[u(p,{title:"address (public)",class:"max-w-screen-sm filter drop-shadow-lg mx-auto",address:e.wallet?.address},null,8,["address"])]),e.wallet?(o(),n("div",U,[a("h3",E,[e.show===""?(o(),n("span",J,"Wallet")):l("",!0),e.show==="transaction"?(o(),n("span",W,"Create Transaction")):l("",!0),e.show==="private_key"?(o(),n("span",L,"Private Key")):l("",!0),u(m,{defaultState:e.explorer,labelEnableText:"Vis.gg",labelDisableText:"API (Legacy)",onChange:h.toggle_explorer},null,8,["defaultState","onChange"])]),e.show===""?(o(),n("p",R," Here you can send, receive and store Viscoin. ")):l("",!0),e.show==="transaction"?(o(),n("p",Y," Create a transaction by filling in the required fields and signing the transaction. You can then click Broadcast which will redirect you to the API tool. ")):l("",!0),e.show==="private_key"?(o(),n("p",G," Your Private Key is sensitive information. Do not share it with anyone unless you want them to be granted full access to the coins on your wallet. ")):l("",!0),a("div",M,[u(r,{text:"Transaction",onClick:t[0]||(t[0]=i=>e.show=e.show==="transaction"?e.show="":"transaction")}),e.explorer?(o(),n("a",{key:0,href:"https://vis.gg/#/explorer/"+e.wallet.address},[u(r,{class:"mx-auto bg-indigo-600 hover:bg-indigo-700",text:"Balance"})],8,Q)):(o(),_(f,{key:1,to:"/api?search=balance/"+e.wallet.address},{default:v(()=>[u(r,{class:"mx-auto",text:"Balance"})]),_:1},8,["to"])),u(r,{text:"Private Key",onClick:t[1]||(t[1]=i=>e.show=e.show==="private_key"?e.show="":"private_key")})]),e.show==="transaction"?(o(),n("div",X,[Z,g(a("input",{name:"address",class:"bg-gray-200 text-gray-800 hover:bg-gray-300 hover:text-black dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-900 dark:hover:text-white mb-10","onUpdate:modelValue":t[2]||(t[2]=i=>e.transaction.to=i),type:"text",placeholder:"Enter address..."},null,512),[[x,e.transaction.to]]),$,g(a("input",{name:"amount",class:"bg-gray-200 text-gray-800 hover:bg-gray-300 hover:text-black dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-900 dark:hover:text-white mb-10","onUpdate:modelValue":t[3]||(t[3]=i=>e.transaction.amount=i),type:"text",placeholder:"Enter amount..."},null,512),[[x,e.transaction.amount]]),ee,g(a("input",{name:"miner-fee",class:"bg-gray-200 text-gray-800 hover:bg-gray-300 hover:text-black dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-900 dark:hover:text-white mb-6","onUpdate:modelValue":t[4]||(t[4]=i=>e.transaction.miner_fee=i),type:"text",placeholder:"Enter miner fee..."},null,512),[[x,e.transaction.miner_fee]]),u(r,{style:{"user-select":"none"},class:"mx-auto mb-10",onClick:h.sign_transaction,text:"Sign transaction"},null,8,["onClick"]),e.transaction_str?g((o(),n("textarea",{key:0,class:"bg-gray-200 text-gray-800 hover:bg-gray-300 hover:text-black dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-900 dark:hover:text-white resize-none text-xs mb-6","onUpdate:modelValue":t[5]||(t[5]=i=>e.transaction_str=i),name:"",id:"",cols:"30",rows:"6"},null,512)),[[x,e.transaction_str]]):l("",!0),e.explorer&&e.transaction_json?(o(),n("a",{key:1,href:"https://vis.gg/#/search/"+e.transaction_json},[u(r,{style:{"user-select":"none"},class:"mx-auto bg-indigo-600 hover:bg-indigo-700",text:"Broadcast"})],8,te)):e.transaction_json?(o(),_(f,{key:2,to:"/api?search="+e.transaction_json},{default:v(()=>[u(r,{style:{"user-select":"none"},class:"mx-auto",text:"Broadcast"})]),_:1},8,["to"])):l("",!0)])):l("",!0),e.show==="private_key"?(o(),n("div",se,[a("div",oe,[u(r,{class:"mx-auto hover:bg-red-600 bg-red-500",onClick:h.del,text:"Delete"},null,8,["onClick"]),u(r,{class:"mx-auto bg-indigo-600 hover:bg-indigo-700",onClick:t[6]||(t[6]=i=>e.show_key=!e.show_key),text:e.show_key?"Hide Key":"Show Key"},null,8,["text"])]),e.show_key?(o(),_(w,{key:0,title:"address (public)",class:"max-w-screen-sm w-60",private:e.wallet?.key},null,8,["private"])):l("",!0)])):l("",!0)])):l("",!0)],64)}var de=S(H,[["render",re]]);export{de as default};
