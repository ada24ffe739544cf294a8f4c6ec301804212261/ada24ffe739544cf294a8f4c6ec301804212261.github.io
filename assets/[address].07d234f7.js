import{_ as S}from"./ToggleButton.23206765.js";import{_ as j}from"./WalletAddress.5041787c.js";import{_ as C,i as T,a as D}from"./index.0f7d6f83.js";import{o,c as i,d as q,r as B,D as A,a as r,t as v,h as _,f as E,k as l,i as g,m,G as y,H as w}from"./vendor.309dbb5d.js";import{d as V,_ as z,a as K}from"./debounce.dc046047.js";const L={props:{data:{type:String}},data(){return{isDarkMode:T}},methods:{render(){const s={errorCorrectionLevel:"H",color:{dark:"000000",light:"ffffff"}};this.isDarkMode&&(s.color={dark:"ffffff",light:"18181b"}),qrcode.toDataURL(this.data,s).then(t=>{this.$refs.img.src=t})},resize(){const s=this.$refs.img.classList;s.contains("w-40")?s.remove("w-40"):s.add("w-40")}},mounted(){this.render(),this.$refs.img.classList.add("w-40")},watch:{isDarkMode:{handler(){this.render()}}}};function M(s,t,c,d,e,n){return o(),i("img",{ref:"img",style:{"image-rendering":"pixelated"},src:"",alt:"",class:"cursor-pointer max-w-80",title:"Click to zoom",onClick:t[0]||(t[0]=(...h)=>n.resize&&n.resize(...h))},null,512)}var N=C(L,[["render",M]]);const R={class:"mx-auto text-gray-200 p-4 lg:text-lg sm:text-sm text-xs rounded-md shadow flex items-center"},U={style:{"white-space":"nowrap"},class:"block overflow-hidden w-60 sm:w-auto hover:text-white mr-2"},H=q({props:{private:null},setup(s){const t=s,c=B(),d=B(!1),e=V(f=>{f(),d.value=!1},1e3),{show:n,hide:h}=A(c,{content:"Copied",trigger:"manual",hideOnClick:!1}),p=async()=>{try{await navigator.clipboard.writeText(t.private),n()}catch{}d.value=!0,e(h)};return(f,b)=>{const u=z,x=K;return o(),i("code",R,[r("span",U,v(t.private),1),r("button",{ref:(a,k)=>{k.copyButton=a,c.value=a},class:"focus:outline-none","aria-label":"Copy install command"},[r("button",{ref:(a,k)=>{k.copyButton=a,c.value=a},class:"focus:outline-none","aria-label":"Copy install command"},[d.value?(o(),_(x,{key:1,class:"inline-block fill-current text-green-500 cursor-pointer mb-1","aria-hidden":"true",onClick:p})):(o(),_(u,{key:0,class:"inline-block fill-current text-gray-200 cursor-pointer hover:text-white mb-1","aria-hidden":"true",onClick:p}))],512)],512)])}}}),O={data(){return{faces:["(\u273F\u25E0\u203F\u25E0)","\u2267\u25E1\u2266","(\uFF89\u25D5\u30EE\u25D5)\uFF89*:\uFF65\uFF9F\u2727","(\u3065\uFF61\u25D5\u203F\u203F\u25D5\uFF61)\u3065","(\u25B0\u02D8\u25E1\u02D8\u25B0)","\u25CE[\u25AA\u203F\u25AA]\u25CE","(\u273F \u2665\u203F\u2665)","\u2665\u203F\u2665","(\uFFE3\u3002\uFFE3)\uFF5E\uFF5A\uFF5A\uFF5A","( \xB4_\u2283\uFF40)","( \u0361\xB0 \u035C\u0296 \u0361\xB0)","(\u3000\uFF9F,_\u309D\uFF9F)"],address:this.$route.params.address,wallets:[],node_input:"",nodes:[],show_key:!1,wallet:null,show_qr_code:!1,transaction:{to:this.$route.query.to||"",amount:this.$route.query.amount||"",miner_fee:""},transaction_str:"",transaction_json:"",show:"",explorer:!0}},methods:{toggle_explorer(s){typeof s=="boolean"&&(this.explorer=s)},sign_transaction(){this.transaction_json=null;try{if(!this.transaction.to)throw new Error("Recipient address is empty");if(!Address.verifyChecksumAddress(base58.decode(this.transaction.to)))throw new Error("Recipient address invalid checksum");const t=Address.toBuffer(this.transaction.to);if(this.transaction.to===this.address)throw new Error("Recipient address is the same as sender address");if(!this.transaction.amount)throw new Error("Amount is empty");const c=beautifyBigInt(parseBigInt(this.transaction.amount));if(!this.transaction.miner_fee)throw new Error("Miner fee is empty");const d=beautifyBigInt(parseBigInt(this.transaction.miner_fee)),e=this.wallet.key,n=new Transaction({to:t,amount:c,minerFee:d,timestamp:Date.now()});n.sign(base58.decode(e));const h=n.isValid();if(h)throw new Error(`Transaction invalid 0b${h.toString(2)}`);this.transaction_str=JSON.stringify(n),this.transaction_json=this.transaction_str}catch(s){this.transaction_str=s}},del(){this.wallets=this.wallets.filter(s=>s.address!==this.address),this.wallet=null,this.$router.push("/wallet")},async share(){const s=this.qr_address,t={errorCorrectionLevel:"H",color:{dark:"000000",light:"ffffff"}},c=e=>{let n=atob(e.split(",")[1]),h=new ArrayBuffer(n.length),p=new Uint8Array(h);for(var f=0;f<n.length;f++)p[f]=n.charCodeAt(f);return new Blob([h],{type:"image/png"})},d=async()=>new File([c(await qrcode.toDataURL(s,t))],"qrcode.png",{type:"image/png"});window.navigator.share({title:"Send Viscoin",url:s,files:[await d()]})}},mounted(){document.title="Viscoin.net - Wallet - "+this.$route.params.address,localStorage.keys&&(this.wallets=JSON.parse(localStorage.keys).map(s=>{const t=base58.decode(s),c=addressFromPublicKey(publicKeyFromPrivateKey(t)),d=Address.convertToChecksumAddress(c),e=base58.encode(d);return{key:s,address:e}}),this.wallet=this.wallets.find(s=>s.address===this.address)),localStorage.nodes&&(this.nodes=JSON.parse(localStorage.nodes)),this.qr_address=`${location.origin}/#/wallet?to=${this.wallet?.address}`,this.qr_key=`${location.origin}/#/wallet/import?key=${this.wallet?.key}`},watch:{wallets:{handler(s){localStorage.keys=JSON.stringify(s.map(t=>t=t.key))},deep:!0},nodes:{handler(s){localStorage.nodes=JSON.stringify(s)},deep:!0}}},I={class:"flex flex-col justify-between h-full mx-6"},J={class:"prose prose-discord dark:prose-light lg:prose-lg mx-auto pb-8 w-full mt-8"},F={class:"flex justify-between"},W={class:"pt-10"},P=r("span",null,"Back",-1),Q=r("span",null,"Back",-1),G={key:0,class:"max-w-3xl sm:mx-auto text-center sm:px-16 flex flex-col gap-10 md:px-12"},X={key:0,class:"flex justify-center"},Y={key:1,class:"prose prose-discord dark:prose-light lg:prose-lg mx-auto w-full"},Z={key:0,class:"max-w-3xl sm:mx-auto sm:px-16 flex flex-col md:px-12"},$={class:"flex flex-col sm:flex-row justify-between mb-10"},ee=r("strong",null,"Sending\xA0from",-1),te={class:"underline"},se=r("label",{style:{"font-size":".8rem"},for:"address"},"The base58 address of the recipient.",-1),oe=r("label",{style:{"font-size":".8rem"},for:"amount"},"How much the recipient will receive.",-1),re=r("label",{style:{"font-size":".8rem"},for:"miner-fee"},"How much the miner will receive.",-1),ne=["href"],ae={key:1,class:"max-w-3xl sm:mx-auto text-center sm:px-16 flex flex-col gap-10 md:px-12"},ie={class:"flex flex-row justify-center"},le={key:2,style:{"user-select":"none"},class:"flex flex-row justify-evenly w-full pb-10 pt-20 md:pt-40"},ce=["href"],de={key:3,style:{"user-select":"none"},class:"flex flex-row justify-evenly w-full"},he=r("div",{class:"py-8"},null,-1);function ue(s,t,c,d,e,n){const h=S,p=E("router-link"),f=j,b=N,u=D,x=H;return o(),i("div",I,[r("div",J,[r("h4",F,[r("span",null,v(this.faces[Math.floor(Math.random()*this.faces.length)]),1),l(h,{defaultState:e.explorer,labelEnableText:"Vis.gg",labelDisableText:"Legacy",onChange:n.toggle_explorer},null,8,["defaultState","onChange"])]),r("div",W,[e.show===""?(o(),_(p,{key:0,to:"/wallet"},{default:g(()=>[P]),_:1})):(o(),_(p,{key:1,to:"/wallet/"+this.address,onClick:t[0]||(t[0]=a=>this.show="")},{default:g(()=>[Q]),_:1},8,["to"]))])]),e.show===""?(o(),i("div",G,[l(f,{title:"address (public)",class:"max-w-screen-sm filter drop-shadow-lg mx-auto",address:e.wallet?.address},null,8,["address"]),e.show===""&&s.qr_address?(o(),i("div",X,[l(b,{data:s.qr_address},null,8,["data"])])):m("",!0)])):m("",!0),e.wallet?(o(),i("div",Y,[e.show==="transaction"?(o(),i("div",Z,[r("div",$,[ee,r("span",te,v(this.address),1)]),se,y(r("input",{name:"address",class:"bg-gray-200 text-gray-800 hover:bg-gray-300 hover:text-black dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-900 dark:hover:text-white mb-10","onUpdate:modelValue":t[1]||(t[1]=a=>e.transaction.to=a),type:"text",placeholder:"Enter address..."},null,512),[[w,e.transaction.to]]),oe,y(r("input",{name:"amount",class:"bg-gray-200 text-gray-800 hover:bg-gray-300 hover:text-black dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-900 dark:hover:text-white mb-10","onUpdate:modelValue":t[2]||(t[2]=a=>e.transaction.amount=a),type:"text",placeholder:"Enter amount..."},null,512),[[w,e.transaction.amount]]),re,y(r("input",{name:"miner-fee",class:"bg-gray-200 text-gray-800 hover:bg-gray-300 hover:text-black dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-900 dark:hover:text-white mb-6","onUpdate:modelValue":t[3]||(t[3]=a=>e.transaction.miner_fee=a),type:"text",placeholder:"Enter miner fee..."},null,512),[[w,e.transaction.miner_fee]]),l(u,{style:{"user-select":"none"},class:"mx-auto mb-10",onClick:n.sign_transaction,text:"Sign Transaction"},null,8,["onClick"]),e.transaction_str?y((o(),i("textarea",{key:0,class:"custom-scroll bg-gray-200 text-gray-800 hover:bg-gray-300 hover:text-black dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-900 dark:hover:text-white resize-none text-xs mb-6","onUpdate:modelValue":t[4]||(t[4]=a=>e.transaction_str=a),name:"",id:"",cols:"30",rows:"6"},null,512)),[[w,e.transaction_str]]):m("",!0),e.explorer&&e.transaction_json?(o(),i("a",{key:1,href:"https://vis.gg/#/search/"+e.transaction_json},[l(u,{style:{"user-select":"none"},class:"mx-auto bg-indigo-600 hover:bg-indigo-700",onClick:n.sign_transaction,text:"Sign & Broadcast"},null,8,["onClick"])],8,ne)):e.transaction_json?(o(),_(p,{key:2,to:"/api?search="+e.transaction_json},{default:g(()=>[l(u,{style:{"user-select":"none"},class:"mx-auto",onClick:n.sign_transaction,text:"Sign & Broadcast"},null,8,["onClick"])]),_:1},8,["to"])):m("",!0)])):m("",!0),e.show==="private_key"?(o(),i("div",ae,[r("div",ie,[l(u,{class:"mx-auto hover:bg-red-600 bg-red-500",onClick:n.del,text:"Delete"},null,8,["onClick"]),l(u,{class:"mx-auto",onClick:t[5]||(t[5]=a=>e.show_key=!e.show_key),text:e.show_key?"Hide Key":"Show Key"},null,8,["text"])]),e.show_key?(o(),_(x,{key:0,title:"address (public)",class:"max-w-screen-sm w-60",private:e.wallet?.key},null,8,["private"])):m("",!0)])):m("",!0),e.show===""?(o(),i("div",le,[l(u,{text:"Create Transaction",onClick:t[6]||(t[6]=a=>e.show=e.show==="transaction"?e.show="":"transaction")}),e.explorer?(o(),i("a",{key:0,href:"https://vis.gg/#/explorer/"+e.wallet.address},[l(u,{class:"mx-auto bg-indigo-600 hover:bg-indigo-700",text:"Check Balance"})],8,ce)):(o(),_(p,{key:1,to:"/api?search=balance/"+e.wallet.address},{default:g(()=>[l(u,{class:"mx-auto",text:"Check Balance"})]),_:1},8,["to"]))])):m("",!0),e.show===""?(o(),i("div",de,[l(u,{text:"Private Key",onClick:t[7]||(t[7]=a=>e.show=e.show==="private_key"?e.show="":"private_key")})])):m("",!0)])):m("",!0),he])}var ye=C(O,[["render",ue]]);export{ye as default};
